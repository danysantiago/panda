<div class="container">
  <div class="row">
    <div class="col-md-2">
      <button ng-click="toggleCourseModal()" type="button" class="btn btn-primary add-button ">
      Create Course
      </button>
    </div>
  
    <div class="col-md-4">
    </div>
    
    <div class="col-md-6">
      <input type="search" ng-model="q" class="form-control" placeholder="Filter Courses">
    </div>
  </div>
  <br>
  <div class="row">
    <div class="col-md-12">
      <h2>Fall 2013</h2>
      <hr>
      
      <div class="well" ng-repeat="course in courses | filterByAttributes:q:['name', 'code', 'semester', 'year']">
        <h3>
          <a href="/#/p/course/{{course._id}}">
            {{course.code}} - {{course.name}}
          </a>
        </h3>
        
        <ul class="nav nav-pills">
          <li id="students-tab">
            <a id="students-link" ng-click="toggleStudents($index)">
              Students <span class="badge">{{course.users.length}}</span>
            </a>
          </li>
          <li id="assignments-tab">
            <a id="assignments-link" ng-click="toggleAssignments($index)">
              Assignments <span class="badge">{{course.assignments.length}}</span>
            </a>
          </li>
        </ul>
        
        <div id="students" ng-show="showStudents[$index]">
          <hr>
          <h3>Students</h3>
          <table class="table table-bordered table-hover">
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Total Grade</th>
            </tr>
            <tr ng-repeat="student in course.users">
            <td>{{student.firstName}} {{student.lastName}}</td>
            <td>{{student.email}}</td>
            <td>{{calcGrade(student.grades)}} / {{course.totalScore}}</td>
            </tr>
          </table>
        </div>

        <div id="assignments" ng-show="showAssignments[$index]">
          <hr>
          <h3>Assignments</h3>
          <table class="table table-bordered table-hover">
            <tr>
              <th ng-click="toggleOrder('name')">Name
                <span ng-show="predicate === 'name'">
                  <span class="glyphicon glyphicon-chevron-down" ng-hide='reverseOrder'></span>
                  <span class="glyphicon glyphicon-chevron-up" ng-show='reverseOrder'></span>
                </span>
              </th>
              <th ng-click="toggleOrder('totalScore')">Total Score
                <span ng-show="predicate === 'totalScore'">
                  <span class="glyphicon glyphicon-chevron-down" ng-hide='reverseOrder'></span>
                  <span class="glyphicon glyphicon-chevron-up" ng-show='reverseOrder'></span>
                </span>
              </th>
              <th ng-click="toggleOrder('numOfTestCases')">Test Cases
                <span ng-show="predicate === 'numOfTestCases'">
                  <span class="glyphicon glyphicon-chevron-down" ng-hide='reverseOrder'></span>
                  <span class="glyphicon glyphicon-chevron-up" ng-show='reverseOrder'></span>
                </span>
              </th>
              <th ng-click="toggleOrder('creationDate')">Date Created
                <span ng-show="predicate === 'creationDate'">
                  <span class="glyphicon glyphicon-chevron-down" ng-hide='reverseOrder'></span>
                  <span class="glyphicon glyphicon-chevron-up" ng-show='reverseOrder'></span>
                </span>
              </th>
              <th ng-click="toggleOrder('deadline')">Deadline
                <span ng-show="predicate === 'deadline'">
                  <span class="glyphicon glyphicon-chevron-down" ng-hide='reverseOrder'></span>
                  <span class="glyphicon glyphicon-chevron-up" ng-show='reverseOrder'></span>
                </span>
              </th>
              <th ng-click="toggleOrder('numOfTries')">Tries
                <span ng-show="predicate === 'numOfTries'">
                  <span class="glyphicon glyphicon-chevron-down" ng-hide='reverseOrder'></span>
                  <span class="glyphicon glyphicon-chevron-up" ng-show='reverseOrder'></span>
                </span>
              </th>
              <th ng-click="toggleOrder('numOfSubmissions')">Submissions
                <span ng-show="predicate === 'numOfSubmissions'">
                  <span class="glyphicon glyphicon-chevron-down" ng-hide='reverseOrder'></span>
                  <span class="glyphicon glyphicon-chevron-up" ng-show='reverseOrder'></span>
                </span>
              </th>
            </tr>
            <tr ng-repeat="assignment in course.assignments | orderBy:predicate:reverseOrder">
              <td><a href="/#/p/assignment/{{assignment._id}}">
                {{assignment.name}}
              </a></td>
              <td>{{assignment.totalScore}}</td>
              <td>{{assignment.numOfTestCases}}</td>
              <td>{{assignment.creationDate}}</td>
              <td>{{assignment.deadline}}</td>
              <td>{{assignment.numOfTries}}</td>
              <td>{{assignment.numOfSubmissions}}</td>
            </tr>
          </table>
        </div>
      </div>

      
    </div>
  </div>

  <div class="modal fade" id="createCourseModal" tabindex="-1" role="dialog" aria-labelledby="createCourseModal" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title" id="modalTitle">Create Course</h4>
        </div>
        <div class="modal-body" ng-model="createCourseForm">
          <form ng-submit="postThat(createCourseForm)">

          <!-- Text input-->
          <div class="form-group">
            <label class="control-label" for="courseName">Name</label>
            <input name="courseName" placeholder="Course Name" class="form-control" type="text" ng-model="newCourse.name">         
          </div>

          <!-- Text input-->
          <div class="form-group">
            <label class="control-label" for="courseCode">Code</label>
            <input id="courseCode" name="courseCode" placeholder="Course Code (MATE3001)" class="form-control" type="text" ng-model="newCourse.code">
          </div>

          <!-- Select Basic -->
          <div class="form-group">
            <label class="control-label" for="courseYear">Year</label>
            <select id="courseYear" name="courseYear" class="form-control" ng-model="newCourse.year">
              <option>2014</option>
              <option>2013</option>
              <option>2012</option>
            </select>
          </div>

          <!-- Select Basic -->
          <div class="form-group">
            <label class="control-label" for="courseSemester">Semester</label>
            <select id="courseSemester" name="courseSemester" class="form-control" ng-model="newCourse.semester">
              <option>Fall</option>
              <option>Spring</option>
              <option>Summer</option>
            </select>
          </div>

          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" ng-click="createCourse(newCourse)">Create</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div>

</div>